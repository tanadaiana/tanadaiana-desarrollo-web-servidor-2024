<!--
INSTRUCCIONES DEL EJERCICIO:
1. Muestra en un alert la cantidad de cursos por los que está compuesto el ciclo.
2. Muestra las listas al pasar por encima el ratón de Primero o Segundo y ocultar al retirarlo. Utiliza el método hover. Tardará en aparecer y desaparecer la información en 2 segundos.
3. Despliega el contenido de las listas al pulsar la tecla y vuelve a plegar al pulsar. Utiliza el método on. Se realizará de forma rápida.
4. Modifica el comportamiento anterior para poder hacerlo con una sola tecla.
5. Elimina el efecto del punto 3.
6. Vuelve a repetir el comportamiento del punto 4 pero ahora solo se producirá la primera vez que se pulse la tecla.
7. Al pasar el ratón por cada uno de los títulos de los módulos de Segundo se mostrará la cantidad de horas semanales. Esta información emergente se mostrará a continuación de donde ubiquemos el ratón. Utiliza hover.
8. Ahora aparecerá el número de horas cuando el usuario haga clic sobre el nombre del módulo. Realiza una delegación de eventos utilizando on.
9. Modifica el ejercicio 8 para que al hacer clic sobre el nombre aparezca el tipo de modalidad (presencial). Esta información será pasada a la función que trata el evento a través del método on.
-->

<html lang="es">
<head>
    <meta charset="UTF-8" />
    <title>Ejercicios DOM Básicos</title>
    <style type="text/css">
        /* Inicialmente ocultamos las listas relacionadas */
        p + ul {
            display: none;
        }

        .fondo {
            background-color: grey;
        }
    </style>
    <script src="./asset/jquery-3.7.1.min.js"></script>
    <script>
    window.onload = function() {

        // 1. Muestra en un alert la cantidad de cursos por los que está compuesto el ciclo.
        alert($('p').length); // Muestra cuántos elementos <p> hay, que representan los cursos.

        // 2. Muestra las listas al pasar por encima el ratón de Primero o Segundo y las oculta al retirarlo. 
        // Usamos el método hover y tardará 2 segundos en aparecer o desaparecer.
        $('p').hover(
            function () {
                $(this).next('ul').stop(true).fadeIn(2000); // Muestra la lista asociada al <p> con animación.
            },
            function () {
                $(this).next('ul').stop(true).fadeOut(2000); // Oculta la lista asociada con animación.
            }
        );

        // 3. Despliega el contenido de las listas al pulsar una tecla y vuelve a plegar al pulsar otra vez.
        let toggle = false; // Estado inicial para el plegado/desplegado.
        $(document).on('keypress', function () {
            toggle = !toggle; // Cambia entre desplegar y plegar.
            $('ul').toggle(toggle); // Alterna la visibilidad de las listas.
        });

        // 5. Elimina el efecto del punto 3.
        $('#eliminar').on('click', function () {
            $(document).off('keypress'); // Desactiva el evento del teclado.
        });

        // 6. Repite el comportamiento del punto 4 pero ahora solo se producirá la primera vez.
        $(document).one('keypress', function () {
            $('ul').toggle(); // Alterna visibilidad solo la primera vez.
        });

        // 7. Muestra las horas semanales al pasar el ratón sobre los títulos de módulos en Segundo.
        $('ul li ul li.azul').hover(
            function (event) {
                const horas = $(this).parent('ul').data('hours'); // Obtiene el atributo data-hours.
                $('<span class="info"></span>')
                    .text(`Horas semanales: ${horas}`) // Crea un texto con las horas.
                    .css({
                        position: 'absolute',
                        top: event.pageY + 10,
                        left: event.pageX + 10,
                        backgroundColor: '#ffffe0',
                        border: '1px solid #ccc',
                        padding: '5px'
                    })
                    .appendTo('body'); // Lo añade al body.
            },
            function () {
                $('.info').remove(); // Elimina la información cuando se retira el ratón.
            }
        );

        // 8. Muestra el número de horas al hacer clic sobre el nombre del módulo (delegación de eventos).
        $('ul').on('click', 'li.azul', function () {
            const horas = $(this).parent('ul').data('hours'); // Obtiene las horas del atributo.
            alert(`Horas: ${horas}`); // Muestra un alert con las horas.
        });

        // 9. Modifica el ejercicio 8 para que al hacer clic sobre el nombre también aparezca la modalidad.
        $('ul').on('click', 'li.azul', function () {
            const horas = $(this).parent('ul').data('hours'); // Obtiene las horas.
            const modalidad = 'Presencial'; // Define la modalidad.
            alert(`Horas: ${horas}, Modalidad: ${modalidad}`); // Muestra ambas en un alert.
        });
    }
    </script>
</head>

<body>
    <!-- Listado de los módulos de Primero y Segundo -->
    <p>Primero</p>
    <ul>
        <li>Base de Datos</li>
        <li>Lenguajes de Marcas</li>
    </ul>

    <p>Segundo</p>
    <ul>
        <li>DWESE
            <ul data-hours="10">
                <li class="azul">Desarrollo Web en Entorno Servidor</li>
            </ul>
        </li>
        <li>DWECL
            <ul data-hours="7">
                <li class="azul">Desarrollo Web en Entorno Cliente</li>
            </ul>
        </li>
        <li>DAW
            <ul data-hours="3">
                <li class="azul">Despliegue de Aplicaciones Web</li>
            </ul>
        </li>
        <li>DIWEB
            <ul data-hours="6">
                <li class="azul">Diseño de Interfaces Web</li>
            </ul>
        </li>
        <li>EIE
            <ul data-hours="4">
                <li class="azul">Entorno e Iniciativa Empresarial</li>
            </ul>
        </li>
    </ul>

    <!-- Botón para eliminar el efecto del punto 3 -->
    <button id="eliminar">Eliminar efecto</button>
</body>
</html>
